<!DOCTYPE html>
<html>
    <style>
        #map {
           height: 430px;
           width : 580px;
        }
     </style>
     <body>
     <div id="map"></div>
       <script>
         let map;
         var markers = [];
         function initMap() {
           map = new google.maps.Map(document.getElementById('map'), {
             center: {lat: 20.3548, lng:85.8153},
             zoom: 15
           });
           // map onclick listener 
           map.addListener('click', function(e) {
             
             addMarker(e.latLng);
           
           });
           
         }
         function setMapOnAll(map) {
             for (var i = 0; i < markers.length; i++) {
               markers[i].setMap(map);
             }
           }
         // define function to add marker at given lat & lng
         function addMarker(latLng) {
             setMapOnAll(null);
           let marker = new google.maps.Marker({
               map: map,
               position: latLng,
               draggable: true
           });
     
           marker.addListener('position_changed', function() {
            //  console.log(marker.getPosition().lat());
            //  console.log(marker.getPosition().lng());
            showHint(marker.getPosition().lat(),marker.getPosition().lng());
           });
     
           markers.push(marker);
        //    console.log(marker.getPosition().lat());
        //    console.log(marker.getPosition().lng());
           showHint(marker.getPosition().lat(),marker.getPosition().lng());
     
           //store the marker object drawn in global array
           function showHint(str,str2) {
  var xhttp;
  
  xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      console.log(this.responseText);
    }
  };
  xhttp.open("GET", "gethint.php?q="+str+"&u="+str2, true);
  xhttp.send();   
}   
         }
     
       </script>
       <script async defer
         src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCWQ1Hb_-b1DCWpAW0RuuJ-acjIhVwm-fU&callback=initMap">
       </script>
     





</body>
</html>
